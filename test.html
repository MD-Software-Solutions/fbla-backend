<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRUD Operations</title>
    <script>
        const apiUrl = 'http://localhost:3000';  // Update this to your API endpoint

        // ----- Users CRUD Operations -----

        // Create a new user
        function createUser() {
    const data = {
    "real_name": "Alice Johnson",
    "personal_email": "alice.johnson@example.com",
    "phone_number": "321-654-9870",
    "birth_date": "1992-08-21",
    "school_name": "Tech High School",
    "school_district": "District 15",
    "school_email": "alice@techhigh.edu",
    "account_username": "alice_j",
    "password": "securePassword123",
    "is_teacher": false,
    "city": "Chicago",
    "state": "IL",
    "bio": "Aspiring software developer with a passion for tech.",
    "profile_img_url": "http://example.com/alice_profile.jpg",
    "avatar_name": "alice_avatar"
}


    fetch('http://localhost:3000/users', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(data => {
        console.log('User created:', data);
        document.getElementById('output').innerText = 'User created successfully: ' + JSON.stringify(data);
    })
    .catch(error => {
        console.error('Error creating user:', error);
        document.getElementById('output').innerText = 'Error: ' + error.message;
    });
}



        // Get all users
        function getUsers() {
            fetch(`${apiUrl}/users`)
                .then(response => response.json())
                .then(data => document.getElementById('output').innerText = 'Users: ' + JSON.stringify(data))
                .catch(error => document.getElementById('output').innerText = 'Error: ' + error);
        }

        // Update user
        function updateUser(userId) {
            const data = {
                real_name: 'John Updated',
                personal_email: 'john.updated@example.com',
                phone_number: '123-000-0000',
                birth_date: '1985-06-15',
                school_name: 'XYZ University Updated',
                school_district: 'District 15',
                school_email: 'john.updated@xyz.edu',
                account_username: 'john_updated',
                is_teacher: true,
                city: 'New York',
                state: 'NY',
                bio: 'Updated educator bio.',
                profile_img_url: 'http://example.com/profile_updated.jpg',
                avatar_name: 'john_updated_avatar'
            };

            fetch(`${apiUrl}/users/${userId}`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => document.getElementById('output').innerText = 'User updated: ' + data.message)
            .catch(error => document.getElementById('output').innerText = 'Error: ' + error);
        }

        // Delete user
        function deleteUser(userId) {
            fetch(`${apiUrl}/users/${userId}`, {
                method: 'DELETE',
            })
            .then(response => response.json())
            .then(data => document.getElementById('output').innerText = 'User deleted: ' + data.message)
            .catch(error => document.getElementById('output').innerText = 'Error: ' + error);
        }

        // ----- Job Postings CRUD Operations -----

        // Create a new job posting
        function createJobPosting() {
            const data = {
                user_id: 1,  // Example user_id
                job_title: 'Math Teacher',
                job_description: 'Responsible for teaching high school mathematics.',
                job_signup_form: '{"form_link": "http://example.com/form"}',
                job_type_tag: 'Full-time',
                industry_tag: 'Education'
            };

            fetch(`${apiUrl}/job_postings`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => document.getElementById('output').innerText = 'Job posting created: ' + data.message)
            .catch(error => document.getElementById('output').innerText = 'Error: ' + error);
        }

        // Get all job postings
        function getJobPostings() {
            fetch(`${apiUrl}/job_postings`)
                .then(response => response.json())
                .then(data => document.getElementById('output').innerText = 'Job Postings: ' + JSON.stringify(data))
                .catch(error => document.getElementById('output').innerText = 'Error: ' + error);
        }

        // Update job posting
        function updateJobPosting(jobId) {
            const data = {
                job_title: 'Science Teacher',
                job_description: 'Responsible for teaching high school science.',
                job_signup_form: '{"form_link": "http://example.com/form2"}',
                job_type_tag: 'Full-time',
                industry_tag: 'Education'
            };

            fetch(`${apiUrl}/job_postings/${jobId}`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => document.getElementById('output').innerText = 'Job posting updated: ' + data.message)
            .catch(error => document.getElementById('output').innerText = 'Error: ' + error);
        }

        // Delete job posting
        function deleteJobPosting(jobId) {
            fetch(`${apiUrl}/job_postings/${jobId}`, {
                method: 'DELETE',
            })
            .then(response => response.json())
            .then(data => document.getElementById('output').innerText = 'Job posting deleted: ' + data.message)
            .catch(error => document.getElementById('output').innerText = 'Error: ' + error);
        }

        // Fetch all usernames and password hashes
        function getUsernamesAndPasswords() {
            fetch(`${apiUrl}/users/usernames-passwords`, {
                method: 'GET',
                headers: { 'Content-Type': 'application/json' }
            })
            .then(response => response.json())
            .then(data => {
                let outputText = 'Usernames and Password Hashes:<br>';
                if (Array.isArray(data)) {
                    data.forEach(user => {
                        outputText += `Username: ${user.account_username}, Password Hash: ${user.password_hash}<br>`;
                    });
                } else {
                    outputText = 'No users found or unexpected response format';
                }
                document.getElementById('output').innerHTML = outputText;
            })
            .catch(error => {
                document.getElementById('output').innerText = 'Error: ' + error;
            });
        }

    </script>
</head>
<body>
    <h1>CRUD Operations</h1>

    <h2>Users</h2>
    <button onclick="createUser()">Create User</button>
    <button onclick="getUsers()">Get Users</button>
    <button onclick="updateUser(1)">Update User (ID: 1)</button>
    <button onclick="deleteUser(1)">Delete User (ID: 1)</button>

    <h2>Job Postings</h2>
    <button onclick="createJobPosting()">Create Job Posting</button>
    <button onclick="getJobPostings()">Get Job Postings</button>
    <button onclick="updateJobPosting(1)">Update Job Posting (ID: 1)</button>
    <button onclick="deleteJobPosting(1)">Delete Job Posting (ID: 1)</button>
    <button onclick="getUsernamesAndPasswords()">Get Usernames & Passwords</button>


    <h2>Output</h2>
    <p id="output">Results will appear here...</p>

</body>
</html>
